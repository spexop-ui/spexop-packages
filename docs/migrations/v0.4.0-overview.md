# Spexop v0.4.0 Migration Overview

**Release Date**: October 20, 2025  
**Status**: Ready for Migration ✅

This document provides a high-level overview of the v0.4.0 migration for both @spexop/react and @spexop/theme packages, helping you understand the scope of changes and plan your migration strategy.

## Quick Start Migration

### 1. Update Packages

```bash
# Update both packages
npm install @spexop/react@^0.4.0 @spexop/theme@^0.4.0

# or with pnpm
pnpm add @spexop/react@^0.4.0 @spexop/theme@^0.4.0

# or with yarn
yarn add @spexop/react@^0.4.0 @spexop/theme@^0.4.0
```

### 2. Choose Migration Strategy

#### **Option A: Gradual Migration (Recommended)**

- Migrate @spexop/theme first (breaking changes)
- Then migrate @spexop/react (breaking changes)
- Test thoroughly between each step

#### **Option B: Complete Migration**

- Update both packages simultaneously
- Migrate all code at once
- Requires more testing but faster completion

## Package-Specific Changes

### @spexop/react v0.4.0

#### Breaking Changes

- **Component Structure Reorganization** - Components moved to semantic categories
- **Specialized Card Components Removed** - Replaced with composition patterns
- **Import Path Changes** - Some components moved to different categories
- **Animation Hooks Relocated** - Moved from `animations/` to `hooks/`

#### Non-Breaking Improvements

- **Enhanced Accessibility** - WCAG AAA compliance improvements
- **Mobile Optimization** - Better touch targets and responsive behavior
- **Visual Polish** - Improved animations and visual consistency
- **Performance Enhancements** - 10-15% bundle size reduction

#### Migration Effort

- **Time Estimate**: 2-4 hours for small projects, 1-2 days for large projects
- **Complexity**: Medium (mostly import changes and component replacements)
- **Risk Level**: Low (comprehensive migration guides provided)

### @spexop/theme v0.4.0

#### Breaking Changes on Theme

- **Token Resolution** - Circular references now throw errors
- **Contrast Checker API** - Simplified interface with new property names
- **Function Signatures** - Some functions have updated parameters
- **Validation Behavior** - Stricter validation with better error messages

#### Non-Breaking Improvements on Theme

- **Security Enhancements** - Input sanitization and XSS prevention
- **Enhanced Validation** - Multi-format color support and better error messages
- **WCAG Accessibility** - Complete contrast checking and compliance tools
- **Color Utilities** - Comprehensive color manipulation functions
- **Dark Mode Generation** - Automatic dark mode generation

#### Migration Effort on Theme

- **Time Estimate**: 1-2 hours for small projects, 4-8 hours for large projects
- **Complexity**: Medium (API changes and new security features)
- **Risk Level**: Medium (requires code changes for API updates)

## Migration Decision Tree

### Do you use specialized card components?

**Yes** → **High Impact Migration**

- Replace with composition patterns
- Update TypeScript types
- Test visual appearance
- **Time**: +2-4 hours

**No** → **Low Impact Migration**

- Update imports only
- Test functionality
- **Time**: +30 minutes

### Do you use contrast checking features?

**Yes** → **API Migration Required**

- Update property names (passAA → AA)
- Update function calls
- Test contrast compliance
- **Time**: +1-2 hours

**No** → **No Theme Migration Needed**

- Update package version only
- **Time**: +5 minutes

### Do you have circular references in theme tokens?

**Yes** → **Fix Required**

- Identify circular references
- Replace with actual values
- Test theme generation
- **Time**: +1-3 hours

**No** → **No Theme Migration Needed**

- Update package version only
- **Time**: +5 minutes

## Migration Timeline Recommendations

### Small Projects (< 10 components)

**Week 1**: Theme Migration

- Day 1: Update @spexop/theme, fix any issues
- Day 2: Test theme generation and validation

**Week 2**: React Migration

- Day 1: Update @spexop/react, update imports
- Day 2: Replace specialized cards, test components

### Medium Projects (10-50 components)

**Week 1**: Theme Migration

- Day 1-2: Update @spexop/theme, fix circular references
- Day 3-4: Update contrast checking code
- Day 5: Test and validate

**Week 2**: React Migration

- Day 1-2: Update @spexop/react, update imports
- Day 3-4: Replace specialized cards, update types
- Day 5: Test and validate

### Large Projects (50+ components)

**Week 1**: Theme Migration

- Day 1-2: Update @spexop/theme, audit theme configurations
- Day 3-4: Fix circular references and validation issues
- Day 5: Update contrast checking and color validation

**Week 2**: React Migration

- Day 1-2: Update @spexop/react, update imports
- Day 3-4: Replace specialized cards, update TypeScript types
- Day 5: Test and validate

**Week 3**: Testing and Optimization

- Day 1-2: Comprehensive testing
- Day 3-4: Performance optimization
- Day 5: Documentation updates

## Common Migration Patterns

### 1. Import Updates

**Before**:

```typescript
import { BlogCard } from '@spexop/react';
import { checkContrast } from '@spexop/theme';
```

**After**:

```typescript
import { Card, CardHeader, CardBody, Avatar, Badge } from '@spexop/react';
import { checkContrast } from '@spexop/theme';
```

### 2. Component Replacement

**Before**:

```tsx
<BlogCard
  title="Getting Started"
  author="Jane Doe"
  date="2025-10-22"
  tags={["Tutorial", "React"]}
/>
```

**After**:

```tsx
<Card variant="basic">
  <CardHeader>
    <h3>Getting Started</h3>
  </CardHeader>
  <CardBody>
    <div className="blog-meta">
      <Avatar name="Jane Doe" />
      <span>Jane Doe</span>
      <time>2025-10-22</time>
    </div>
    <div className="blog-tags">
      <Badge>Tutorial</Badge>
      <Badge>React</Badge>
    </div>
  </CardBody>
</Card>
```

### 3. API Updates

**Before**:

```typescript
const result = checkContrast("#000000", "#ffffff");
if (result.passAA) {
  console.log("Passes AA contrast");
}
```

**After**:

```typescript
const result = checkContrast("#000000", "#ffffff");
if (result.AA) {
  console.log("Passes AA contrast");
}
```

## Testing Strategy

### Pre-Migration Testing

1. **Backup your project** - Create git commit or backup
2. **Run current tests** - Ensure all tests pass
3. **Document current behavior** - Note any custom implementations
4. **Check dependencies** - Ensure compatibility with v0.4.0

### During Migration Testing

1. **Incremental testing** - Test after each major change
2. **Visual regression testing** - Ensure UI looks the same
3. **Functionality testing** - Verify all interactions work
4. **Performance testing** - Check bundle size and runtime performance

### Post-Migration Testing

1. **Full test suite** - Run all tests
2. **Cross-browser testing** - Test on different browsers
3. **Mobile testing** - Verify mobile optimizations
4. **Accessibility testing** - Test with screen readers
5. **Performance testing** - Verify performance improvements

## Rollback Strategy

### If Migration Fails

1. **Immediate rollback**:

   ```bash
   npm install @spexop/react@^0.3.0 @spexop/theme@^0.3.0
   git checkout HEAD~1  # or your last working commit
   ```

2. **Investigate issues**:
   - Check migration guides for missed steps
   - Review error messages and logs
   - Test in isolation to identify problems

3. **Plan retry**:
   - Fix identified issues
   - Consider gradual migration approach
   - Test each step more thoroughly

### Partial Rollback

If only one package has issues:

1. **Rollback problematic package**:

   ```bash
   npm install @spexop/react@^0.3.0  # or @spexop/theme@^0.3.0
   ```

2. **Keep working package**:
   - Continue using updated package
   - Plan migration for problematic package later

## Benefits of Migration

### Immediate Benefits

- **Better Performance** - 10-15% bundle size reduction
- **Enhanced Accessibility** - WCAG AAA compliance
- **Mobile Optimization** - Better touch targets and responsive behavior
- **Security Improvements** - Input sanitization and XSS prevention

### Long-term Benefits

- **Better Maintainability** - Cleaner component structure
- **Improved Developer Experience** - Better TypeScript support
- **Future-Proof Architecture** - Foundation for future enhancements
- **Community Support** - Active development and support

## Getting Help

### Documentation

- **React Migration Guide**: [from-v0.3-to-v0.4.md](./from-v0.3-to-v0.4.md)
- **Theme Migration Guide**: [theme-from-v0.3-to-v0.4.md](./theme-from-v0.3-to-v0.4.md)
- **Component Documentation**: [spexop.com/docs](https://spexop.com/docs)

### Community Support

- **GitHub Issues**: [github.com/spexop-ui/spexop-design-system](https://github.com/spexop-ui/spexop-design-system)
- **Discord Community**: [discord.gg/spexop](https://discord.gg/spexop)
- **Stack Overflow**: Tag questions with `spexop`

### Professional Support

- **Enterprise Support**: Available for large organizations
- **Migration Services**: Professional migration assistance
- **Training**: Team training on new features

## Migration Checklist

### Pre-Migration

- [ ] **Backup project** - Create git commit or backup
- [ ] **Review breaking changes** - Understand what will change
- [ ] **Check dependencies** - Ensure compatibility
- [ ] **Run current tests** - Ensure all tests pass
- [ ] **Plan migration strategy** - Choose gradual or complete migration

### Theme Migration

- [ ] **Update @spexop/theme** - Install v0.4.0
- [ ] **Fix circular references** - Resolve any circular token references
- [ ] **Update contrast checker** - Update API calls
- [ ] **Add security features** - Implement sanitization where needed
- [ ] **Test theme generation** - Verify all themes work

### React Migration

- [ ] **Update @spexop/react** - Install v0.4.0
- [ ] **Update imports** - Replace category-specific imports
- [ ] **Replace specialized cards** - Use composition patterns
- [ ] **Update TypeScript types** - Create your own type definitions
- [ ] **Test components** - Verify all components work

### Post-Migration

- [ ] **Run full test suite** - Ensure all tests pass
- [ ] **Test on mobile devices** - Verify mobile optimizations
- [ ] **Test accessibility** - Verify accessibility improvements
- [ ] **Check performance** - Verify performance improvements
- [ ] **Update documentation** - Update any internal documentation

## Success Metrics

### Technical Metrics

- [ ] **All tests passing** - 100% test pass rate
- [ ] **TypeScript compilation** - No type errors
- [ ] **Bundle size reduction** - 10-15% smaller bundles
- [ ] **Performance improvement** - Faster runtime performance

### User Experience Metrics

- [ ] **Accessibility compliance** - WCAG AAA compliance
- [ ] **Mobile optimization** - Better mobile experience
- [ ] **Visual consistency** - Improved visual polish
- [ ] **Developer experience** - Better TypeScript support

### Business Metrics

- [ ] **Reduced maintenance** - Easier to maintain codebase
- [ ] **Faster development** - Improved developer productivity
- [ ] **Better user experience** - Enhanced accessibility and mobile experience
- [ ] **Future readiness** - Foundation for future enhancements

---

**Ready to migrate?** Start with the [React Migration Guide](./from-v0.3-to-v0.4.md) or [Theme Migration Guide](./theme-from-v0.3-to-v0.4.md) for detailed instructions.

**Need help?** Join our [Discord community](https://discord.gg/spexop) or [open an issue](https://github.com/spexop-ui/spexop-design-system) for support.
